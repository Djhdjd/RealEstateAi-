<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–¥–±–æ—Ä–∞ - RealEstate AI</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
    <nav class="navbar">
        <div class="container">
            <a href="/" class="logo">üè† RealEstate AI</a>
            <div class="nav-links">
                <a href="/">–ì–ª–∞–≤–Ω–∞—è</a>
                <a href="/catalog">–ö–∞—Ç–∞–ª–æ–≥</a>
                <a href="/ai-search">–ò–ò-–ø–æ–¥–±–æ—Ä</a>
            </div>
        </div>
    </nav>

    <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã -->
    <section class="results-section">
        <div class="container">
            <div class="results-header">
                <h1>üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ò–ò-–ø–æ–¥–±–æ—Ä–∞</h1>
                <a href="/ai-search" class="btn btn-secondary">‚Üê –ù–æ–≤—ã–π –ø–æ–∏—Å–∫</a>
            </div>

            <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (–∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è JS) -->
            <div id="resultsContainer"></div>
        </div>
    </section>

    <!-- –§—É—Ç–µ—Ä -->
    <footer>
        <div class="container">
            <p>&copy; 2024 RealEstate AI. –£—á–µ–±–Ω—ã–π –ø—Ä–æ–µ–∫—Ç.</p>
        </div>
    </footer>

    <script>
        // –ü–æ–ª—É—á–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏–∑ localStorage
        const results = JSON.parse(localStorage.getItem('aiResults') || '[]');
        const container = document.getElementById('resultsContainer');

        if (results.length === 0) {
            container.innerHTML = `
                <div class="no-results">
                    <p>üòî –ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –Ω–µ –Ω–∞–π–¥–µ–Ω–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –ø–æ –≤–∞—à–∏–º –∫—Ä–∏—Ç–µ—Ä–∏—è–º</p>
                    <a href="/ai-search" class="btn btn-primary">–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –¥—Ä—É–≥–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã</a>
                </div>
            `;
        } else {
            let html = '<div class="results-grid">';
            
            results.forEach((item, index) => {
                const prop = item.property;
                const score = item.score;
                const matchLevel = item.match_level;
                const explanations = item.explanations;
                
                // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ü–≤–µ—Ç –±–µ–π–¥–∂–∞ –ø–æ —É—Ä–æ–≤–Ω—é —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è
                let badgeClass = 'badge-low';
                if (score >= 80) badgeClass = 'badge-high';
                else if (score >= 60) badgeClass = 'badge-medium';
                
                html += `
                    <div class="result-card">
                        <div class="result-rank">#${index + 1}</div>
                        <img src="${prop.image_url}" alt="${prop.title}" class="result-image">
                        <div class="result-info">
                            <div class="result-header">
                                <h3>${prop.title}</h3>
                                <div class="result-badge ${badgeClass}">
                                    ${matchLevel} (${score.toFixed(1)} –±–∞–ª–ª–æ–≤)
                                </div>
                            </div>
                            
                            <div class="property-location">üìç ${prop.city}, ${prop.address}</div>
                            
                            <div class="property-details">
                                <span>üè† ${prop.rooms} –∫–æ–º–Ω.</span>
                                <span>üìê ${prop.area} –º¬≤</span>
                                ${prop.type === 'apartment' ? `<span>üè¢ ${prop.floor}/${prop.total_floors} —ç—Ç–∞–∂</span>` : ''}
                            </div>
                            
                            <p class="property-description">${prop.description}</p>
                            
                            <div class="ai-explanation">
                                <h4>üí° –ü–æ—á–µ–º—É —ç—Ç–æ—Ç –≤–∞—Ä–∏–∞–Ω—Ç –ø–æ–¥—Ö–æ–¥–∏—Ç:</h4>
                                <ul>
                                    ${explanations.map(exp => `<li>${exp}</li>`).join('')}
                                </ul>
                            </div>
                            
                            <div class="result-footer">
                                <div class="property-price">${prop.price.toLocaleString('ru-RU')} ‚ÇΩ</div>
                            </div>
                        </div>
                    </div>
                `;
            });
            
            html += '</div>';
            container.innerHTML = html;
        }
    </script>
</body>
</html>
